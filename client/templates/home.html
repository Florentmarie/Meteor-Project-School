<template name="Home">
<head>
  <title>Répertoire de contacts</title>
  <meta name="viewport" content="width=device-width"/>
</head>

<body>
  <div class="container">
    {{> hello}}

    <!-- si l'user est connecté on affiche sa liste -->
    {{#if currentUser}}
    {{> liste}}
    {{/if}}

     {{> searchBox}}
  </div>
  
</body>



</template>


<template name="hello">
 
 
  <h1 class="text-center first-title">Répertoire de contacts</h1>
  <div class="login btn btn-primary">{{> loginButtons}}</div>
  <div class="row">
    <div class="col-md-11 title">
      <h1>Contact</h1>
      {{> ajout}}
      <hr>
    </div>
  </div>
</template>

<template name="ajout">
	<!-- ajout d'un contact -->
  <div class="dropdown pull-right">
    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
      Ajouter un contact
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
      <form class="new-contact">
      <li role="presentation"><label>Nom</label><input required type="text" name="nom" placeholder="NOM" /></li>
      <li role="presentation"><label>Mail</label><input required type="email" name="mail" placeholder="MAIL" /></li>
      <li role="presentation"><input class="btn btn-success" type="submit" value="Submit"></li>
      </form>
    </ul>
  </div>
</template>

<template name="searchBox">
  <!-- instant searchbox -->

    {{> esInput index="contacts" placeholder="Chercher un contact" }}

    <ul>
        {{#esEach index="contacts"}}
            <li>Nom du contact : <a href='/user/{{_id}}'>{{nom}}</a></li>
        {{/esEach}}
    </ul>
      {{#ifEsHasNoResults index="contacts"}}
        <div class="no-results">Aucun résultat</div>
    {{/ifEsHasNoResults}}
</template>

<template name="liste">


  {{#if contact}} <!-- si il a des contacts -->
  <div class="row list">
    {{#each contact}} 
    <div class="col-md-6">
      <a href="user/{{_id}}"> 
        <div>
          Nom :  {{nom}}<br>
          Mail :  {{mail}}
        </div>
      </a>
      <button class="delete">&times;</button>
    </div>  
     {{/each}}
   </div>
  {{else}}
  Vous n'avez pas de contacts
  {{/if}}
</template>
